# Блок 9.5: Вызовы удаления в approve и reject

## Цель

Вызывать `delete_moderator_own_photo_message_for_application` при завершении сессии модератором (подтверждение и отклонение заявки) вместе с уже существующими вызовами удаления уведомлений и скриншота.

## Задачи

| № | Действие | Файл |
|---|----------|------|
| 5.1 | В `callback_moderator_approve` добавить импорт `delete_moderator_own_photo_message_for_application` и вызов после `delete_moderator_screenshot_message_for_application` | `handlers/moderator_handlers.py` |
| 5.2 | В `callback_moderator_reject` добавить импорт `delete_moderator_own_photo_message_for_application` и вызов после `delete_moderator_screenshot_message_for_application` | `handlers/moderator_handlers.py` |

## Детали

Импорт из `utils.moderator_messages`:

```python
from utils.moderator_messages import (
    delete_moderator_notifications_for_application,
    delete_moderator_screenshot_message_for_application,
    delete_moderator_own_photo_message_for_application,
)
```

В блоке try после вызова `delete_moderator_screenshot_message_for_application` добавить:

```python
await delete_moderator_own_photo_message_for_application(
    bot=callback.bot,
    application_id=application_id,
)
```

## Чек-лист

- [x] Вызов добавлен в `callback_moderator_approve`
- [x] Вызов добавлен в `callback_moderator_reject`

## Выполнено

✅ **Задача 5.1**: В функции `callback_moderator_approve` в `handlers/moderator_handlers.py` добавлен импорт `delete_moderator_own_photo_message_for_application` и вызов функции после `delete_moderator_screenshot_message_for_application` в блоке try (строки 482-496).

✅ **Задача 5.2**: В функции `callback_moderator_reject` в `handlers/moderator_handlers.py` добавлен импорт `delete_moderator_own_photo_message_for_application` и вызов функции после `delete_moderator_screenshot_message_for_application` в блоке try (строки 644-658).

Теперь при завершении сессии модератором (approve/reject) автоматически удаляются:
1. Уведомления о заявке у всех модераторов (`delete_moderator_notifications_for_application`)
2. Сообщение "Скриншот от пользователя" у модератора (`delete_moderator_screenshot_message_for_application`)
3. Сообщение с фото модератора в его чате (`delete_moderator_own_photo_message_for_application`)

Все три функции вызываются в одном блоке try/except для обработки ошибок.

## Блок 4. Очередь и баланс

### Алгоритм расчёта времени ожидания

1. Берётся среднее время сессии модератора из таблицы `moderator_stats`.  
2. Если статистики нет, используется значение по умолчанию (например, 5 минут).  
3. Время ожидания рассчитывается по формуле:  
   - `ожидание = (позиция_в_очереди - 1) × среднее_время_сессии`.  
4. Время и позиция обновляются при изменении очереди (подключение модератора, завершение сессий).  

### Система баланса

#### Пополнение (временная реализация)

- Кнопка «Пополнить баланс».  
- Ввод суммы пользователем.  
- Генерация уникального ID транзакции.  
- Вывод инструкций по оплате (под будущую интеграцию с платёжками / криптой).  
- Подтверждение платежа администратором (отдельная команда/кнопка).  

#### Списание

- Автоматическое списание 250₽ при создании заявки.  
- Проверка достаточного остатка на балансе.  
- Запись транзакции в таблицу `transactions`.  


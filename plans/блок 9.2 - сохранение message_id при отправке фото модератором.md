# Блок 9.2: Сохранение message_id при отправке фото модератором

## Цель

При обработке фото от модератора сохранять `message.message_id` в БД, чтобы при завершении сессии можно было удалить это сообщение в чате модератора.

## Контекст

В обработчике `process_moderator_photo` (состояние `waiting_for_moderator_photo`) модератор отправляет фото в бот. Сообщение остаётся в его чате. После вызова `set_session_moderator_photo` нужно сохранить message_id этого сообщения через новую функцию из блока 9.1.

## Задачи

| № | Действие | Файл |
|---|----------|------|
| 2.1 | После `await set_session_moderator_photo(...)` вызвать `set_moderator_own_photo_message_id(db_session, moderation_session.id, message.message_id)` | `handlers/moderator_handlers.py` |

## Детали

Место вставки: функция `process_moderator_photo`, после строки с `await set_session_moderator_photo(db_session, moderation_session, file_id)` и `await db_session.flush()`, перед отправкой фото пользователю.

Импорт: `from database.queries import set_moderator_own_photo_message_id` (или добавить к существующему импорту из queries).

## Чек-лист

- [x] При отправке фото модератором сохраняется `message.message_id` в поле `moderator_own_photo_message_id` сессии

## Выполнено

✅ **Задача 2.1**: В функции `process_moderator_photo` в `handlers/moderator_handlers.py` добавлен вызов `set_moderator_own_photo_message_id(db_session, moderation_session.id, message.message_id)` после `set_session_moderator_photo` и `db_session.flush()`. Также добавлен импорт `set_moderator_own_photo_message_id` в основной блок импортов из `database.queries`.

Теперь при отправке фото модератором в бот, message_id этого сообщения сохраняется в БД и может быть использован для удаления сообщения при завершении сессии.
